Source: @browser@
Section: web
Priority: optional
Maintainer: Maintainers of Mozilla-related packages <team+pkg-mozilla@tracker.debian.org>
Uploaders: Mike Hommey <glandium@debian.org>
Build-Depends: autotools-dev,
%if DIST == jessie
               debhelper (>= 9),
               gcc-mozilla,
%else
               debhelper (>= 9.20160114),
%endif
               autoconf2.13,
               libx11-dev,
               libx11-xcb-dev,
               libxt-dev,
               libgtk-3-dev,
               libgtk2.0-dev (>= 2.10),
               libglib2.0-dev (>= 2.16.0),
               libstartup-notification0-dev,
               libjpeg-dev,
%if USE_SYSTEM_ZLIB
               zlib1g-dev,
%endif
               libreadline-dev,
               python2.7,
               python3,
               dpkg-dev (>= 1.16.1.1~),
%if USE_SYSTEM_NSPR
%define NSPR_VERSION 4.21
               libnspr4-dev (>= 2:@NSPR_VERSION@~),
%endif
%if USE_SYSTEM_NSS
%define NSS_VERSION 3.44.3
               libnss3-dev (>= 2:@NSS_VERSION@~),
%endif
%if USE_SYSTEM_SQLITE
%define SQLITE_VERSION 3.28.0
               libsqlite3-dev (>= @SQLITE_VERSION@),
%endif
%if USE_SYSTEM_VPX
               libvpx-dev (>= 1.5.0),
%endif
               libdbus-glib-1-dev,
%if USE_SYSTEM_FFI
               libffi-dev,
%endif
%if USE_SYSTEM_LIBEVENT
               libevent-dev (>= 1.4.1),
%endif
               libjsoncpp-dev,
               libpulse-dev,
               libasound2-dev,
               yasm (>= 1.1),
%if DIST == jessie || DIST == stretch
               nasm-mozilla (>= 2.13) [amd64 i386],
%else
               nasm (>= 2.13) [amd64 i386],
%endif
               rustc (>= 1.34),
               cargo (>= 0.35),
%if DIST == jessie || DIST == stretch
               llvm-4.0-dev,
               libclang-4.0-dev,
               clang-4.0,
%else
               llvm-dev,
               libclang-dev,
               clang,
%endif
               cbindgen (>= 0.8.7),
%if DIST == jessie || DIST == stretch
               nodejs-mozilla (>= 8.11),
%else
               nodejs (>= 8.11),
%endif
               zip,
               unzip,
               locales,
               xvfb,
               xfonts-base,
               xauth,
               ttf-bitstream-vera,
               fonts-freefont-ttf,
               fonts-dejima-mincho,
               iso-codes
Build-Conflicts: graphicsmagick-imagemagick-compat,
                 liboss4-salsa-dev,
                 libhildonmime-dev,
%if USE_SYSTEM_VPX
                 libvpx-dev (>= 1.8.0),
%endif
                 libosso-dev
Standards-Version: 3.9.8.0
Vcs-Git: https://salsa.debian.org/mozilla-team/firefox.git -b @SHORT_SOURCE_CHANNEL@/master
Vcs-Browser: https://salsa.debian.org/mozilla-team/firefox/commits/@SHORT_SOURCE_CHANNEL@/master

Package: @browser@
Architecture: any
Depends: ${shlibs:Depends},
         ${misc:Depends},
         fontconfig,
         procps,
         debianutils (>= 1.16),
%if USE_SYSTEM_SQLITE
         libsqlite3-0 (>= @SQLITE_VERSION@),
%endif
%if USE_SYSTEM_NSPR
         libnspr4 (>= 2:@NSPR_VERSION@~),
%endif
%if USE_SYSTEM_NSS
         libnss3 (>= 2:@NSS_VERSION@~)
%endif
Recommends: @LIBAVCODEC@
Suggests: fonts-stix | otf-stix,
          fonts-lmodern,
          libgssapi-krb5-2 | libkrb53,
          libcanberra0,
          libgtk2.0-0,
          pulseaudio
%if TRANSITION
Conflicts: iceweasel (<< 45)
%endif
Breaks: xul-ext-torbutton
Provides: www-browser,
          gnome-www-browser
%define RAW_DESCRIPTION Mozilla Firefox web browser
%define LONGDESC1 @Browser@ is a powerful, extensible web browser with support for modern
%define LONGDESC2 web application technologies.
%define firefox_esr firefox-esr
%if browser == firefox_esr
%define DESCRIPTION @RAW_DESCRIPTION@ - Extended Support Release (ESR)
%else
%define DESCRIPTION @RAW_DESCRIPTION@
%endif
Description: @DESCRIPTION@
 @LONGDESC1@
 @LONGDESC2@
%if TRANSITION

Package: iceweasel
Architecture: all
Priority: extra
Section: oldlibs
Depends: @browser@, ${misc:Depends}
Description: Web browser based on Firefox - Transitional package
 This is a transitional package, it can be safely removed.
%endif

%if DIST == jessie
Package: @browser@-dbg
Architecture: any
Priority: extra
Section: debug
Depends: @browser@ (= ${binary:Version}),
%if USE_SYSTEM_NSS
         libnss3-dbg | libnss3-1d-dbg,
%endif
%if USE_SYSTEM_NSPR
         libnspr4-dbg | libnspr4-0d-dbg,
%endif
         ${misc:Depends}
%if TRANSITION
Breaks: iceweasel-dbg (<< 45)
Replaces: iceweasel-dbg (<< 45)
Provides: iceweasel-dbg
%endif
Description: Debugging symbols for @Browser@
 @LONGDESC1@
 @LONGDESC2@
 .
 This package contains the debugging symbols for @browser@.
%if TRANSITION

Package: iceweasel-dbg
Architecture: all
Priority: extra
Section: oldlibs
Depends: @browser@-dbg, ${misc:Depends}
Description: Debugging symbols for Iceweasel - Transitional package
 This is a transitional package, it can be safely removed.
%endif
%endif

Package: @browser@-l10n-all
Architecture: all
Section: metapackages
Depends: ${misc:Depends}, @L10N_PACKAGES_DEPS@
%if TRANSITION
Breaks: iceweasel-l10n-all (<< 45)
Replaces: iceweasel-l10n-all (<< 45)
Provides: iceweasel-l10n-all
%endif
Description: All language packages for @Browser@ (meta)
 @LONGDESC1@
 @LONGDESC2@
 .
 This is a metapackage depending on all available localizations of @Browser@.
%if TRANSITION

Package: iceweasel-l10n-all
Architecture: all
Priority: extra
Section: oldlibs
Depends: @browser@-l10n-all, ${misc:Depends}
Description: All language packages for Iceweasel - Transitional package
 This is a transitional package, it can be safely removed.
%endif
%include l10n/browser-l10n.control

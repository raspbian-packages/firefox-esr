From: Peter Michael Green <plugwash@raspbian.org>
Subject: Disable neon in qcms.

--- thunderbird-102.1.1.orig/gfx/qcms/qcmsint.h
+++ thunderbird-102.1.1/gfx/qcms/qcmsint.h
@@ -96,18 +96,18 @@ void qcms_transform_data_bgra_out_lut_al
                                               unsigned char *dest,
                                               size_t length);
 
-void qcms_transform_data_rgb_out_lut_neon(const qcms_transform *transform,
-                                          const unsigned char *src,
-                                          unsigned char *dest,
-                                          size_t length);
-void qcms_transform_data_rgba_out_lut_neon(const qcms_transform *transform,
-                                           const unsigned char *src,
-                                           unsigned char *dest,
-                                           size_t length);
-void qcms_transform_data_bgra_out_lut_neon(const qcms_transform *transform,
-                                           const unsigned char *src,
-                                           unsigned char *dest,
-                                           size_t length);
+//void qcms_transform_data_rgb_out_lut_neon(const qcms_transform *transform,
+//                                          const unsigned char *src,
+//                                          unsigned char *dest,
+//                                          size_t length);
+//void qcms_transform_data_rgba_out_lut_neon(const qcms_transform *transform,
+//                                           const unsigned char *src,
+//                                           unsigned char *dest,
+//                                           size_t length);
+//void qcms_transform_data_bgra_out_lut_neon(const qcms_transform *transform,
+//                                           const unsigned char *src,
+//                                           unsigned char *dest,
+//                                           size_t length);
 
 extern bool qcms_supports_iccv4;
 extern bool qcms_supports_neon;
--- thunderbird-102.1.1.orig/gfx/qcms/src/lib.rs
+++ thunderbird-102.1.1/gfx/qcms/src/lib.rs
@@ -64,8 +64,8 @@ pub use transform::DataType;
 pub use transform::Transform;
 #[cfg(any(target_arch = "x86", target_arch = "x86_64"))]
 mod transform_avx;
-#[cfg(all(any(target_arch = "aarch64", target_arch = "arm"), feature = "neon"))]
-mod transform_neon;
+//#[cfg(all(any(target_arch = "aarch64", target_arch = "arm"), feature = "neon"))]
+//mod transform_neon;
 #[cfg(any(target_arch = "x86", target_arch = "x86_64"))]
 mod transform_sse2;
 mod transform_util;
--- thunderbird-102.1.1.orig/gfx/qcms/src/transform.rs
+++ thunderbird-102.1.1/gfx/qcms/src/transform.rs
@@ -21,11 +21,11 @@
 // WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 
 #![allow(clippy::missing_safety_doc)]
-#[cfg(all(any(target_arch = "arm", target_arch = "aarch64"), feature = "neon"))]
+/*#[cfg(all(any(target_arch = "arm", target_arch = "aarch64"), feature = "neon"))]
 use crate::transform_neon::{
     qcms_transform_data_bgra_out_lut_neon, qcms_transform_data_rgb_out_lut_neon,
     qcms_transform_data_rgba_out_lut_neon,
-};
+};*/
 use crate::{
     chain::chain_transform,
     double_to_s15Fixed16Number,
@@ -1369,7 +1369,7 @@ pub fn transform_create(
                 }
             }
 
-            #[cfg(all(target_arch = "arm", feature = "neon"))]
+            /*#[cfg(all(target_arch = "arm", feature = "neon"))]
             let neon_supported = is_arm_feature_detected!("neon");
             #[cfg(all(target_arch = "aarch64", feature = "neon"))]
             let neon_supported = is_aarch64_feature_detected!("neon");
@@ -1383,7 +1383,7 @@ pub fn transform_create(
                 } else if in_type == BGRA8 {
                     transform.transform_fn = Some(qcms_transform_data_bgra_out_lut_neon)
                 }
-            }
+            }*/
 
             if transform.transform_fn.is_none() {
                 if in_type == RGB8 {
